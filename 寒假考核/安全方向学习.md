# 一.部署win xp，win7，win2003，win2008虚拟机

准备xp系统的iso镜像文件（建一个iso文件夹）
xp系统选32位
在光盘那个选项里插入映像文件
ctrl+alt真实与虚拟机切换鼠标
磁盘分区建一个C盘10240MB
格式化时用NTFS文件系统格式化（快）

磁盘分区时右键我的电脑--->管理---->分区时记得点快速格式化
其他版本类似

克隆

关机--->快照管理---->克隆--->现有快照---->创建链接克隆---->更改计算机名称

# 二.部署时遇到的问题

win7版本以及win2008虚拟机部署时，无法安装VM tools，开始时我以为是下载的版本不对应该是SP1补丁版，但我看了下确实是SP1补丁版，csdn上很多说快捷方法换一个镜像源，我找了很多网站的镜像，都没有解决问题。导致一直浪费很多时间，最后看到一种方法在win7虚拟机里安装一个补丁KB4474419，然后就在虚拟机里的浏览器上费了一些功夫终于下载了补丁（很多网页已经不支持浏览了，其实还可以在真实机上下到U盘上再连接到虚拟机上挺方便的，但我的U盘没有带回来），安装成功之后，终于让我的虚拟机变成了正常大小。可以进行下一步操作了。

ps：我是用迅雷下的镜像源，一开始没事但在之后的使用中我发现每次下载都会卡在99.9%正在验证中，搜了很多方法，有说改文件后缀的，有说换链接的，还有说网络问题的等等，但都不能解决问题。之后我看到有说检查一下自己的磁盘占用，内存占用，后台运行什么的，我突然想起来我改过迅雷的一个设置叫下载磁盘缓存，直接调成最大了，占用的磁盘资源变多了，下的也确实快了点，当时没在意，我就想了一下是不是他的缘故，然后就调了回去，终于解决了问题

# 三.IP地址

路由器连接内网和外网；交换机用来组建局域网（内网）

IP地址是一段网络编码（二进制），由32位组成

## 1.子网掩码

通信规则：在同一局域网中，所有IP必须在同一网段中才能通信
IP地址构成：网络位+主机位（网络位相同的IP地址，为同一网段）
子网掩码：用来确定IP地址的网络位
子网掩码如何如何确认网络位：与255对应的数字为网络位，与0对应的数字为主机位（255.0.0.0；255.255.0.0；255.255.255.0）
注：一个IP地址必须配套一个子网掩码

### 地址分类：五类（是以IP地址的第一位进行区分的）

A类：1~126默认子网掩码：255.0.0.0
B类：128~191默认子网掩码：255.255.0.0
C类：192~223默认子网掩码：255.255.255.0
D类：224~239组播地址
E类：240~254科研使用
普通人可以使用的为A，B，C三类
网段总称将主机位置0
该网段的广播地址将主机位设为255
可用的地址主机位不全为0或255
特殊地址127.0.0.1永远是自己的地址（回环地址）

## 2.pc向外发包：

1. 首先判断目标IP与自己是否在同一网段
2. 如在同一网段，则直接发出去，而不去找网关
3. 如不在同一网段，则直接发包给网关

## 3.自己配IP地址

右键网络---->属性---->右键本地连接---->属性---->双击internet协议
win11：右键网络图标---->网络和Internet设置---->高级网络设置---->以太网就是本机真实网关

DNS服务器：注册域名，提供解析服务

## 4.小实验

测试两台虚拟机的联通性：打开两台虚拟机---->配置在同一网段下的IP地址---->打开命令行窗口---->输入cmd---->ping

ping	-l	数字	IP地址---->修改ping包的大小
ping	-t	IP地址---->一直ping
ping	-n	数字	IP地址---->修改ping包的数量
nslookup	网址---->手动解析域名的IP地址
ipconfig---->查看IP地址的基本信息
ipconfig	/all---->可以看到DNS

# 四.基本DOS命令

1. 

|           格式            |                     作用                     |
| :-----------------------: | :------------------------------------------: |
|            dir            |        显示当前路径下的所有文件和目录        |
| dir[路径]\[文件名]\[参数] | 以指定参数格式显示指定路径下的所有文件和目录 |

| 参数 |                       作用                       |
| :--: | :----------------------------------------------: |
|  /W  |               只显示文件名和目录名               |
|  /P  | 当屏幕无法将信息完全显示时，可使用其进行分页展示 |
|  /A  |              显示具有特殊属性的文件              |
|  /S  |         显示当前目录及其子目录下所有文件         |

2. 

|   格式    |                   作用                   |
| :-------: | :--------------------------------------: |
| cd[目录]  |               进入指定目录               |
|   cd..    |               返回上级目录               |
|    cd\    |          返回盘符目录，即根目录          |
| cd/[目录] | 直接跨盘符跳转指定目录（直接写盘符也行） |

3. md---->创建指定目录

   md [路径]

4. cd>---->创建指定文件

   cd>文件名

5. rd---->删除指定空目录(只能删除空目录且不能删除当前目录)

   rd [路径]

6. del---->删除指定文件

   |             格式             |         作用         |
   | :--------------------------: | :------------------: |
   |  del[路径]\[文件名]\[参数]   | 在删除指定文件时询问 |
   |      del[路径]\[文件名]      |     直接删除文件     |
   |         del *.扩展名         | 删除该扩展名所有文件 |
   | del *.\*  （/q：无提示删除） |     删除所有文件     |

7. copy---->复制文件

   一次只能复制一个文件

   copy	[源目录或文件]	[目的目录或文件]
   copy	con	文件名.扩展名
   开始编辑内容
   ctrl+z回车结束编写

8. ren---->改名

   ren	[原文件路径 + 文件名]	[要改成的名称]

9. type---->在命令行窗口打开文件

   type	[文件名]

10. cls---->清空DOS命令窗口

11. sys---->传递系统文件命令

    执行sys后，目标盘将成为DOS的启动盘

12. exit---->退出程序

13. attrib---->修改属性

    attrib	+（-）属性值	文件名

    | 属性值 |            作用            |
    | :----: | :------------------------: |
    |   h    |            隐藏            |
    |   s    | 提升为受保护的系统级文件夹 |
    |   a    |         该文件只读         |

14. fsutil    file    createnew    c:\system.ini    40960000(大小单位字节)
    带有恶意的创建了一个很大的空文件

15. assoc---->修改关联性

    assoc	.txt=exefile
    将txt文件用应用程序的方式打开（直接报错）

16. 开关机命令

    shutdown	-s	-f	-t	秒	-c	“文字”
    -s关机，-r重启，-f强制，-t定时
    解药：shutdown	-a

17. echo    后面的字会显示在窗口上

18. color    ?查看颜色控制台

    color	两位数字：前一位是背景颜色，后一位是字体颜色

# 五.批处理编写(标点一定用英文！！！)

扩展名：.bat

新建一个记事本文件，然后手动将扩展名改为.bat

## 1.常用语句

@echo	off屏蔽执行过程

pause暂停

title起标题

echo.空一行

2>nul	屏蔽操作失败显示的信息，如果成功依旧显示
\>nul	屏蔽操作成功显示的信息，如果失败依旧显示
2>nul	\>nul屏蔽所有输出语句显示，成功或失败都不显示

“：”区块后加区块名配合goto去到别的区块

start打开某个程序或某个网页，如果后面什么都不写就是打开cmd

%userprofile%当前用户的家目录**%%是取值的意思**
当路径有特殊符号时路径左右加上“ ”

\>清除文件原有内容后再写入
\>>追加内容到文件末尾，不会清除原有内容，将本来显示在屏幕上的内容输出到指定文件中，如果文件不存在，则自动生成该文件

## 2.变量的使用

set---->设置变量
set	a=100
属性后加**/p**表示等号后面不再是a变量的值，而要等待用户输入一个结果

if用法和C语言类似，如 ` if "%a%"=="1"`意思是判断a是不是等于1

## 3.编写定时关机小程序中碰到的问题

(1)在一些步骤中需要添加pause暂停，尤其是在需要显示在屏幕上的一些提示性文字，不然会一闪而过根本看不到，复查代码有时候想不到这点

(2)当我写完之后改后缀要运行的时候，发现中文全部变成了乱码，上网查询后发现是编码格式的问题，要将UTF-8格式改成ANSI格式，这样中文才可以正常显示，我改了之后发现确实可以了，我想查一查为什么，大都说的是UTF-8在Windows里自带BOM，带BOM的UTF-8会中文乱码，ANSI相当于没有BOM的UTF-8，但我在改编码格式的时候发现UTF-8有两种，一种是UTF-8，另一种是UTF-8  BOM，那我原来用的也没有BOM吧，但是还是有乱码，不知道是为什么。

(3)最重要的就是一定要用英文标点符号，我在分块时用的“：”是中文的，就导致根本无法按编写的来走，而且在记事本中不像在编程软件中一样，中英文标点很难分辨，我检查了很久没有发现问题，最后才突然想到标点的问题
